<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Calculadora de juros compostos para investidores. Veja como seu dinheiro pode crescer com o tempo.">
  <title>Calculadora de Juros Compostos | Cérebro Milionário</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>Calculadora de Juros Compostos</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="calculadora.html">Calculadora</a>
      <a href="posts/index.html">Blog</a>
    </nav>
  </header>
  <main>
    <section>
      <form id="calcForm">
        <label>Valor inicial (R$): <input type="number" id="inicial" required></label><br>
        <label>Aporte mensal (R$): <input type="number" id="aporte" required></label><br>
        <label>Taxa de juros (% ao ano): <input type="number" id="juros" required></label><br>
        <label>Período (anos): <input type="number" id="anos" required></label><br>
        <button type="submit">Calcular</button>
      </form>
      <h3 id="resultado"></h3>
      <canvas id="grafico" width="400" height="200"></canvas>
    </section>
  </main>
  <footer>
    <p>&copy; 2025 Cérebro Milionário</p>
  </footer>
  <script>
    document.getElementById("calcForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const P = parseFloat(document.getElementById("inicial").value);
      const PMT = parseFloat(document.getElementById("aporte").value);
      const i = parseFloat(document.getElementById("juros").value) / 100 / 12;
      const n = parseInt(document.getElementById("anos").value) * 12;
      let montante = P * Math.pow(1 + i, n);
      for (let t = 1; t <= n; t++) {
        montante += PMT * Math.pow(1 + i, n - t);
      }
      document.getElementById("resultado").textContent = `Montante final: R$ ${montante.toFixed(2)}`;

      let dados = [];
      let total = P;
      for (let t = 0; t <= n; t++) {
        dados.push((() => {
          let valor = P * Math.pow(1 + i, t);
          for (let m = 1; m <= t; m++) {
            valor += PMT * Math.pow(1 + i, t - m);
          }
          return valor.toFixed(2);
        })());
      }

      const labels = Array.from({length: n + 1}, (_, i) => `Mês ${i}`);
      const data = {
        labels: labels,
        datasets: [{
          label: 'Evolução do Patrimônio (R$)',
          data: dados,
          fill: false,
          borderColor: 'rgb(75, 192, 192)',
          tension: 0.1
        }]
      };
      new Chart(document.getElementById("grafico"), {
        type: 'line',
        data: data
      });
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Blog | C√©rebro Milion√°rio</title>
  <meta name="description" content="Artigos do C√©rebro Milion√°rio sobre investimentos, renda fixa, ETFs, FIIs e finan√ßas pessoais." />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://peppy-lollipop-54fa27.netlify.app/blog.html" />

  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://peppy-lollipop-54fa27.netlify.app/blog.html" />
  <meta property="og:title" content="Blog | C√©rebro Milion√°rio" />
  <meta property="og:description" content="Artigos densos e ferramentas pr√°ticas para investir melhor." />
  <meta property="og:image" content="https://peppy-lollipop-54fa27.netlify.app/images/blog-cover.svg" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/css/style.css" />

  <!-- AdSense -->
  <meta name="google-adsense-account" content="ca-pub-4613426749830025">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4613426749830025" crossorigin="anonymous"></script>

  <style>
    /* Layout do Blog */
    .page-header .container{max-width:1100px}
    .blog-controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-top:12px}
    .blog-controls input, .blog-controls select{flex:1;min-width:220px;padding:12px 14px;border-radius:14px;border:1px solid rgba(0,0,0,.10);outline:none;background:#fff;box-shadow:var(--shadow-sm)}
    .blog-controls input:focus, .blog-controls select:focus{border-color:rgba(244,196,48,.75);box-shadow:0 0 0 4px rgba(244,196,48,.15)}
    .muted{opacity:.78}
    .divider-soft{border:0;height:1px;background:rgba(0,0,0,.08);margin:18px 0}

    .posts-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    @media(max-width:980px){.posts-grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:640px){.posts-grid{grid-template-columns:1fr}}

    .post-card{display:flex;flex-direction:column;overflow:hidden;border-radius:18px;border:1px solid rgba(0,0,0,.08);background:#fff;box-shadow:var(--shadow-sm);transition:transform .15s ease, box-shadow .15s ease}
    .post-card:hover{transform:translateY(-2px);box-shadow:0 18px 40px rgba(0,0,0,.12)}
    .post-card img{width:100%;height:160px;object-fit:cover;background:rgba(0,0,0,.04);display:block}
    .post-body{padding:14px;display:flex;flex-direction:column;gap:10px;height:100%}
    .post-body h3{margin:0;font-size:16px;line-height:1.25}
    .post-body p{margin:0;opacity:.82}
    .meta{display:flex;gap:10px;flex-wrap:wrap;align-items:center;font-size:12px;opacity:.85}
    .tag{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:rgba(44,44,46,.06);font-weight:700}
    .readtime{display:inline-flex;align-items:center;gap:6px}
    .lastmod{display:inline-flex;align-items:center;gap:6px}
    .btn-sm{display:inline-flex;align-items:center;justify-content:center;padding:10px 12px;border-radius:14px;border:1px solid rgba(0,0,0,.10);background:#fff;box-shadow:var(--shadow-sm);text-decoration:none;font-weight:800}
    .btn-sm:hover{transform:translateY(-1px)}
    .post-cta{margin-top:auto;display:flex;gap:10px;flex-wrap:wrap}

    .empty-state{border:1px solid rgba(0,0,0,.08);border-radius:18px;padding:18px;background:#fff;box-shadow:var(--shadow-sm)}
    .empty-state h3{margin:0 0 8px 0}

    /* Pagina√ß√£o bonita */
    .pagination{margin:18px 0 0;display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
    .pagination button{min-width:52px;height:52px;border-radius:16px;border:1px solid rgba(0,0,0,.10);background:#fff;box-shadow:var(--shadow-sm);font-weight:900;cursor:pointer;transition:transform .12s ease, box-shadow .12s ease, background .12s ease}
    .pagination button:hover{transform:translateY(-1px);box-shadow:0 12px 28px rgba(0,0,0,.12);background:rgba(244,196,48,.14)}
    .pagination button.active{background:#2c2c2e;color:#fff;border-color:#2c2c2e}
    @media(max-width:480px){.pagination button{min-width:46px;height:46px;border-radius:14px}}

    /* Destaques (S√©ries / Pilares) */
    .featured-wrap{margin-top:18px}
    .featured-title{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .featured-title h2{margin:0;font-size:20px}
    .featured-grid{margin-top:12px;display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
    @media(max-width:980px){.featured-grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:640px){.featured-grid{grid-template-columns:1fr}}
    .featured-card{display:flex;flex-direction:column;overflow:hidden;border-radius:18px;border:1px solid rgba(0,0,0,.08);background:#fff;box-shadow:var(--shadow-sm);transition:transform .15s ease}
    .featured-card:hover{transform:translateY(-2px)}
    .featured-card img{width:100%;height:140px;object-fit:cover;background:rgba(0,0,0,.04);display:block}
    .featured-body{padding:14px;display:flex;flex-direction:column;gap:10px;height:100%}
    .featured-body h3{margin:0;font-size:16px;line-height:1.25}
    .featured-body p{margin:0;opacity:.82}
    .featured-meta{display:flex;gap:10px;flex-wrap:wrap;align-items:center;font-size:12px;opacity:.85}
    .featured-cta{margin-top:auto}
  </style>
</head>

<body>
  <!-- Header padr√£o -->
  <header class="header">
    <div class="container header-container">
      <div class="logo">
        <h1><a href="/index.html">C√©rebro Milion√°rio</a></h1>
      </div>

      <button class="mobile-menu-btn" aria-label="Abrir menu" aria-expanded="false">
        <i class="fas fa-bars"></i>
      </button>

      <nav class="navigation" id="primary-navigation">
        <ul class="nav-menu">
          <li><a href="/index.html">Home</a></li>
          <li><a href="/estrategia-investimentos.html">Estrat√©gia</a></li>
          <li><a href="/calculadora.html">Calculadora</a></li>
          <li><a href="/comparador-cdb-lci-lca.html">Comparador</a></li>
          <li><a href="/calculadora-ir-renda-fixa.html">IR Renda Fixa</a></li>
          <li><a href="/aposentadoria.html">Aposentadoria</a></li>
          <li><a href="/blog.html" class="active">Blog</a></li>
          <li><a href="/comunidade.html">Comunidade</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section class="page-header">
      <div class="container">
        <h1>Blog</h1>
        <p class="muted" style="max-width:900px;">
          Artigos densos e ferramentas pr√°ticas para investir melhor. Este blog carrega os posts automaticamente a partir do <a href="/sitemap.xml">sitemap.xml</a>.
        </p>

        <div class="blog-controls">
          <input id="search" type="search" placeholder="Pesquisar por t√≠tulo/tema (ex.: ETFs, renda fixa, aposentadoria‚Ä¶)" />
          <select id="tag">
            <option value="all">Todas as categorias</option>
          </select>
        </div>

        <div class="featured-wrap" aria-label="Destaques do Blog">
          <div class="featured-title">
            <h2>üî• Destaques</h2>
            <span class="muted">S√©ries e pilares para voc√™ estudar em sequ√™ncia</span>
          </div>

          <div class="featured-grid">
            <!-- S√©rie ETF Masterclass (mantido como estava) -->
            <article class="featured-card">
              <a href="/posts/etf-masterclass-carteira-global-parte-1.html" style="text-decoration:none;">
                <img src="/images/blog-cover.svg" alt="ETF Masterclass Parte 1" loading="lazy" onerror="this.src='/images/blog-cover.svg';" />
              </a>
              <div class="featured-body">
                <div class="featured-meta">
                  <span class="tag"><i class="fa-solid fa-bolt"></i> Masterclass</span>
                  <span class="readtime"><i class="fa-regular fa-clock"></i> 40‚Äì55 min</span>
                </div>
                <h3>ETF Masterclass (Parte 1)</h3>
                <p>Funda√ß√£o institucional: arquitetura, core/sat√©lites, custos e como pensar como ‚Äúgestor‚Äù.</p>
                <div class="featured-cta"><a class="btn-sm" href="/posts/etf-masterclass-carteira-global-parte-1.html">Abrir Parte 1</a></div>
              </div>
            </article>

            <article class="featured-card">
              <a href="/posts/etf-masterclass-carteira-global-parte-2.html" style="text-decoration:none;">
                <img src="/images/blog-cover.svg" alt="ETF Masterclass Parte 2" loading="lazy" onerror="this.src='/images/blog-cover.svg';" />
              </a>
              <div class="featured-body">
                <div class="featured-meta">
                  <span class="tag"><i class="fa-solid fa-bolt"></i> Masterclass</span>
                  <span class="readtime"><i class="fa-regular fa-clock"></i> 40‚Äì55 min</span>
                </div>
                <h3>ETF Masterclass (Parte 2)</h3>
                <p>Teoria aplicada: Markowitz, Sharpe, CAPM, fatores e c√¢mbio/hedge sem achismo.</p>
                <div class="featured-cta"><a class="btn-sm" href="/posts/etf-masterclass-carteira-global-parte-2.html">Abrir Parte 2</a></div>
              </div>
            </article>

            <article class="featured-card">
              <a href="/posts/etf-masterclass-carteira-global-parte-3.html" style="text-decoration:none;">
                <img src="/images/blog-cover.svg" alt="ETF Masterclass Parte 3" loading="lazy" onerror="this.src='/images/blog-cover.svg';" />
              </a>
              <div class="featured-body">
                <div class="featured-meta">
                  <span class="tag"><i class="fa-solid fa-bolt"></i> Masterclass</span>
                  <span class="readtime"><i class="fa-regular fa-clock"></i> 45‚Äì60 min</span>
                </div>
                <h3>ETF Masterclass (Parte 3)</h3>
                <p>Carteiras modelo (1 ETF, 3 ETFs, fatores), sobreposi√ß√£o e rebalanceamento com regras.</p>
                <div class="featured-cta"><a class="btn-sm" href="/posts/etf-masterclass-carteira-global-parte-3.html">Abrir Parte 3</a></div>
              </div>
            </article>

            <article class="featured-card">
              <a href="/posts/etf-masterclass-carteira-global-parte-4.html" style="text-decoration:none;">
                <img src="/images/blog-cover.svg" alt="ETF Masterclass Parte 4" loading="lazy" onerror="this.src='/images/blog-cover.svg';" />
              </a>
              <div class="featured-body">
                <div class="featured-meta">
                  <span class="tag"><i class="fa-solid fa-bolt"></i> Masterclass</span>
                  <span class="readtime"><i class="fa-regular fa-clock"></i> 40‚Äì55 min</span>
                </div>
                <h3>ETF Masterclass (Parte 4)</h3>
                <p>Fechamento institucional: operacional, riscos, erros fatais e checklist final de execu√ß√£o.</p>
                <div class="featured-cta"><a class="btn-sm" href="/posts/etf-masterclass-carteira-global-parte-4.html">Abrir Parte 4</a></div>
              </div>
            </article>
          </div>

          <!-- B√≠blia da Aposentadoria (novo destaque) -->
          <div class="featured-title" style="margin-top:16px;">
            <h2>üìò B√≠blia da Aposentadoria</h2>
            <span class="muted">S√©rie completa (4 partes) ‚Äî do plano √† execu√ß√£o</span>
          </div>

          <div class="featured-grid" style="margin-top:12px;">
            <article class="featured-card">
              <a href="/posts/biblia-da-aposentadoria-parte-1.html" style="text-decoration:none;">
                <img src="/images/blog-cover.svg" alt="B√≠blia da Aposentadoria Parte 1" loading="lazy" onerror="this.src='/images/blog-cover.svg';" />
              </a>
              <div class="featured-body">
                <div class="featured-meta">
                  <span class="tag"><i class="fa-solid fa-book"></i> Aposentadoria</span>
                  <span class="readtime"><i class="fa-regular fa-clock"></i> 55‚Äì75 min</span>
                </div>
                <h3>B√≠blia da Aposentadoria (Parte 1)</h3>
                <p>Metas, diagn√≥stico, vari√°veis-chave e como ‚Äúfechar a conta‚Äù do seu plano com realismo.</p>
                <div class="featured-cta"><a class="btn-sm" href="/posts/biblia-da-aposentadoria-parte-1.html">Abrir Parte 1</a></div>
              </div>
            </article>

            <article class="featured-card">
              <a href="/posts/biblia-da-aposentadoria-parte-2.html" style="text-decoration:none;">
                <img src="/images/blog-cover.svg" alt="B√≠blia da Aposentadoria Parte 2" loading="lazy" onerror="this.src='/images/blog-cover.svg';" />
              </a>
              <div class="featured-body">
                <div class="featured-meta">
                  <span class="tag"><i class="fa-solid fa-book"></i> Aposentadoria</span>
                  <span class="readtime"><i class="fa-regular fa-clock"></i> 55‚Äì75 min</span>
                </div>
                <h3>B√≠blia da Aposentadoria (Parte 2)</h3>
                <p>Motor da acumula√ß√£o: aportes, retorno real, infla√ß√£o e aloca√ß√£o por fases com regras.</p>
                <div class="featured-cta"><a class="btn-sm" href="/posts/biblia-da-aposentadoria-parte-2.html">Abrir Parte 2</a></div>
              </div>
            </article>

            <article class="featured-card">
              <a href="/posts/biblia-da-aposentadoria-parte-3.html" style="text-decoration:none;">
                <img src="/images/blog-cover.svg" alt="B√≠blia da Aposentadoria Parte 3" loading="lazy" onerror="this.src='/images/blog-cover.svg';" />
              </a>
              <div class="featured-body">
                <div class="featured-meta">
                  <span class="tag"><i class="fa-solid fa-book"></i> Aposentadoria</span>
                  <span class="readtime"><i class="fa-regular fa-clock"></i> 60‚Äì85 min</span>
                </div>
                <h3>B√≠blia da Aposentadoria (Parte 3)</h3>
                <p>Saque seguro: risco de sequ√™ncia, guardrails, bucket strategy e rebalanceamento com saques.</p>
                <div class="featured-cta"><a class="btn-sm" href="/posts/biblia-da-aposentadoria-parte-3.html">Abrir Parte 3</a></div>
              </div>
            </article>

            <article class="featured-card">
              <a href="/posts/biblia-da-aposentadoria-parte-4.html" style="text-decoration:none;">
                <img src="/images/blog-cover.svg" alt="B√≠blia da Aposentadoria Parte 4" loading="lazy" onerror="this.src='/images/blog-cover.svg';" />
              </a>
              <div class="featured-body">
                <div class="featured-meta">
                  <span class="tag"><i class="fa-solid fa-book"></i> Aposentadoria</span>
                  <span class="readtime"><i class="fa-regular fa-clock"></i> 45‚Äì65 min</span>
                </div>
                <h3>B√≠blia da Aposentadoria (Parte 4)</h3>
                <p>Gest√£o de risco, prote√ß√£o, governan√ßa e checklist final: execu√ß√£o em 12 meses.</p>
                <div class="featured-cta"><a class="btn-sm" href="/posts/biblia-da-aposentadoria-parte-4.html">Abrir Parte 4</a></div>
              </div>
            </article>
          </div>

          <hr class="divider-soft" />
        </div>

        <div id="empty" class="empty-state" style="display:none;">
          <h3>Nenhum post encontrado</h3>
          <p class="muted">Tente outra palavra-chave ou selecione outra categoria.</p>
        </div>

        <div id="posts" class="posts-grid" aria-label="Lista de posts"></div>
        <div id="pagination" class="pagination" aria-label="Pagina√ß√£o"></div>

      </div>
    </section>
  </main>

  <!-- Footer padr√£o -->
  <footer class="footer">
    <div class="container footer-container">
      <div>
        <h3>C√©rebro Milion√°rio</h3>
        <p>Educa√ß√£o financeira com profundidade estrat√©gica.</p>
      </div>
      <div>
        <h3>Navega√ß√£o</h3>
        <ul>
          <li><a href="/politica-privacidade.html">Pol√≠tica de Privacidade</a></li>
          <li><a href="/termos-uso.html">Termos de Uso</a></li>
          <li><a href="/blog.html">Blog</a></li>
          <li><a href="/estrategia-investimentos.html">Estrat√©gia</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="container">
        <p>&copy; 2026 C√©rebro Milion√°rio. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

  <script>
    // Menu mobile
    (function () {
      const btn = document.querySelector('.mobile-menu-btn');
      const nav = document.getElementById('primary-navigation');
      if (!btn || !nav) return;
      btn.addEventListener('click', function () {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        nav.classList.toggle('open');
      });
    })();

    // Blog: carrega automaticamente do sitemap.xml e cria cards + pagina√ß√£o
    const els = {
      container: document.getElementById('posts'),
      pagination: document.getElementById('pagination'),
      empty: document.getElementById('empty'),
      search: document.getElementById('search'),
      tag: document.getElementById('tag')
    };

    const state = {
      posts: [],
      shown: [],
      page: 1,
      perPage: 12,
      q: '',
      tag: 'all'
    };

    function safePathFromLoc(loc){
      try{
        const u = new URL(loc);
        return u.pathname || loc;
      }catch(e){
        // loc j√° pode estar como /posts/x.html
        if (loc.startsWith('/')) return loc;
        return '/' + String(loc).replace(/^https?:\/\/[^\/]+/,'').replace(/^\//,'');
      }
    }

    function slugToTitle(file){
      const slug = String(file || '').replace(/\.html$/,'').replace(/[-_]+/g,' ').trim();
      if(!slug) return 'Post';
      return slug.split(' ').map(w => w ? (w[0].toUpperCase() + w.slice(1)) : '').join(' ');
    }

    function buildDescFromSlug(slug){
      const s = String(slug||'').replace(/[-_]+/g,' ');
      if(!s) return 'Artigo do C√©rebro Milion√°rio.';
      if (s.includes('aposentadoria')) return 'Planejamento e estrat√©gia para aposentadoria com m√©todo.';
      if (s.includes('renda fixa')) return 'Renda fixa com profundidade: retorno real, riscos e decis√µes pr√°ticas.';
      if (s.includes('etf')) return 'ETFs, aloca√ß√£o global e estrat√©gia de carteira.';
      if (s.includes('fii') || s.includes('fiis')) return 'FIIs: an√°lise, armadilhas e constru√ß√£o de renda.';
      if (s.includes('acoes') || s.includes('a√ß√µes')) return 'A√ß√µes e estrat√©gias de longo prazo sem ru√≠do.';
      return 'Conte√∫do pr√°tico e direto para melhorar suas decis√µes.';
    }

    function inferTagFromSlug(slug){
      const s = String(slug||'').toLowerCase();
      if (s.includes('aposentadoria')) return 'Aposentadoria';
      if (s.includes('renda-fixa') || s.includes('cdb') || s.includes('lci') || s.includes('lca') || s.includes('ipca')) return 'Renda Fixa';
      if (s.includes('etf')) return 'ETFs';
      if (s.includes('fii')) return 'FIIs';
      if (s.includes('acoes') || s.includes('a√ß√µes') || s.includes('acao')) return 'A√ß√µes';
      if (s.includes('psicologia') || s.includes('habitos') || s.includes('h√°bitos')) return 'Mentalidade';
      return 'Investimentos';
    }

    function normalizeTag(t){
      return String(t||'').trim();
    }

    function unique(arr){
      return Array.from(new Set(arr));
    }

    function renderTags(){
      const tags = unique(state.posts.map(p => p.tag).filter(Boolean).map(normalizeTag)).sort((a,b)=>a.localeCompare(b,'pt-BR'));
      const current = els.tag.value || 'all';
      els.tag.innerHTML = `<option value="all">Todas as categorias</option>` + tags.map(t => `<option value="${t}">${t}</option>`).join('');
      els.tag.value = current;
    }

    function cardTemplate(p){
      return `
      <article class="post-card">
        <a href="${p.url}" style="text-decoration:none;">
          <img src="${p.image || '/images/blog-default.svg'}" alt="${escapeHtml(p.title)}" loading="lazy"
            onerror="this.src='/images/blog-cover.svg';" />
        </a>
        <div class="post-body">
          <div class="meta">
            <span class="tag"><i class="fa-solid fa-tag"></i> ${escapeHtml(p.tag || 'Investimentos')}</span>
            <span class="readtime"><i class="fa-regular fa-clock"></i> ${escapeHtml(p.readTime || '10‚Äì15 min')}</span>
            ${p.lastmod ? `<span class="lastmod"><i class="fa-regular fa-calendar"></i> ${escapeHtml(p.lastmod)}</span>` : ``}
          </div>
          <h3>${escapeHtml(p.title)}</h3>
          <p>${escapeHtml(p.desc || '')}</p>
          <div class="post-cta">
            <a class="btn-sm" href="${p.url}">Abrir</a>
          </div>
        </div>
      </article>
      `;
    }

    function escapeHtml(str){
      return String(str||'')
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'","&#039;");
    }

    function renderPagination(totalPages){
      const cur = state.page;
      if (totalPages <= 1){
        els.pagination.innerHTML = '';
        return;
      }
      const buttons = [];
      for (let i=1;i<=totalPages;i++){
        buttons.push(`<button data-p="${i}" class="${i===cur?'active':''}" aria-label="P√°gina ${i}">${i}</button>`);
      }
      els.pagination.innerHTML = buttons.join('');
      els.pagination.querySelectorAll('button').forEach(b=>{
        b.addEventListener('click', ()=>{
          const p = Number(b.getAttribute('data-p')||'1');
          state.page = p;
          render();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      });
    }

    function applyFilters(){
      const q = (state.q || '').toLowerCase().trim();
      const tag = state.tag || 'all';

      let list = state.posts.slice();

      if (tag !== 'all'){
        list = list.filter(p => normalizeTag(p.tag) === tag);
      }
      if (q){
        list = list.filter(p =>
          String(p.title||'').toLowerCase().includes(q) ||
          String(p.desc||'').toLowerCase().includes(q) ||
          String(p.tag||'').toLowerCase().includes(q) ||
          String(p.slug||'').toLowerCase().includes(q)
        );
      }

      state.shown = list;
      state.page = 1;
      render();
    }

    function render(){
      const total = state.shown.length;
      const totalPages = Math.max(1, Math.ceil(total / state.perPage));
      state.page = Math.min(state.page, totalPages);

      const start = (state.page - 1) * state.perPage;
      const slice = state.shown.slice(start, start + state.perPage);

      els.container.innerHTML = slice.map(cardTemplate).join('');
      const filtering = !!(state.q || (state.tag !== 'all'));
      els.empty.style.display = (filtering && total === 0) ? 'block' : 'none';

      renderPagination(totalPages);
    }

    function isoToBr(iso){
      if(!iso) return '';
      const d = new Date(iso);
      if (isNaN(d.getTime())) return '';
      const dd = String(d.getDate()).padStart(2,'0');
      const mm = String(d.getMonth()+1).padStart(2,'0');
      const yy = d.getFullYear();
      return `${dd}/${mm}/${yy}`;
    }

    async function loadFromSitemap(){
      const res = await fetch('/sitemap.xml', { cache: 'no-store' });
      if(!res.ok) throw new Error('N√£o consegui acessar /sitemap.xml');

      const xmlText = await res.text();
      const xml = new DOMParser().parseFromString(xmlText, 'application/xml');

      const urls = Array.from(xml.querySelectorAll('url')).map(u => ({
        loc: (u.querySelector('loc')?.textContent || '').trim(),
        lastmod: (u.querySelector('lastmod')?.textContent || '').trim()
      })).filter(u => u.loc);

      const posts = urls
        .map(u => ({ ...u, path: safePathFromLoc(u.loc) }))
        .filter(u => u.path.includes('/posts/'));

      const featuredMap = {
        "etf-masterclass-carteira-global-parte-1": { title: "ETF Masterclass: Carteira Global N√≠vel Institucional (Parte 1)", tag: "Masterclass", readTime: "40‚Äì55 min", image: "/images/blog-cover.svg",
          desc: "Funda√ß√£o institucional: arquitetura da carteira, core/sat√©lites, custos e erros cl√°ssicos." },
        "etf-masterclass-carteira-global-parte-2": { title: "ETF Masterclass (Parte 2): Markowitz, CAPM, Fatores e C√¢mbio", tag: "Masterclass", readTime: "40‚Äì55 min", image: "/images/blog-cover.svg",
          desc: "Teoria moderna aplicada: correla√ß√£o, Sharpe, CAPM, fatores e hedge cambial sem achismo." },
        "etf-masterclass-carteira-global-parte-3": { title: "ETF Masterclass (Parte 3): Carteiras Modelo e Rebalanceamento", tag: "Masterclass", readTime: "45‚Äì60 min", image: "/images/blog-cover.svg",
          desc: "Modelos (1 ETF, 3 ETFs, fatores), sobreposi√ß√£o e rebalanceamento por calend√°rio/bandas." },
        "etf-masterclass-carteira-global-parte-4": { title: "ETF Masterclass (Parte 4): Impostos, Operacional e Checklist Final", tag: "Masterclass", readTime: "40‚Äì55 min", image: "/images/blog-cover.svg",
          desc: "Governan√ßa e execu√ß√£o: fric√ß√µes, riscos invis√≠veis, erros fatais e plano de 12 meses." },

        "renda-fixa-guia-completo-2026": { title: "Renda Fixa: Guia Completo 2026 (n√≠vel institucional)", tag: "Renda Fixa", readTime: "60+ min", image: "/images/blog-cover.svg",
          desc: "Curva, duration, cr√©dito, infla√ß√£o, cen√°rios e decis√µes com rigor t√©cnico (sem simplismo)." },
        "etfs-alocacao-global-guia-2026_cfa": { title: "ETFs e Aloca√ß√£o Global 2026 (n√≠vel CFA)", tag: "ETFs", readTime: "60+ min", image: "/images/blog-cover.svg",
          desc: "Constru√ß√£o de carteira global, risco, diversifica√ß√£o, fatores e escolhas com m√©todo." },
        "construcao-patrimonio-independencia-financeira-2026_max": { title: "Constru√ß√£o de Patrim√¥nio e Independ√™ncia Financeira (2026) ‚Äî n√≠vel m√°ximo", tag: "Carteira", readTime: "60+ min", image: "/images/blog-cover.svg",
          desc: "Estrat√©gia completa: aportes, aloca√ß√£o, comportamento, risco de ru√≠na e execu√ß√£o de longo prazo." },
        "warren-buffett-biografia-completa-2026": { title: "Warren Buffett: Biografia Completa e Li√ß√µes de Investimento (2026)", tag: "Investimentos", readTime: "60+ min", image: "/images/blog-cover.svg",
          desc: "Trajet√≥ria completa, princ√≠pios, decis√µes marcantes e li√ß√µes pr√°ticas aplic√°veis." },

        "biblia-da-aposentadoria-parte-1": { title: "B√≠blia da Aposentadoria (Parte 1): Metas, Diagn√≥stico e Plano", tag: "Aposentadoria", readTime: "55‚Äì75 min", image: "/images/blog-cover.svg",
          desc: "Metas e diagn√≥stico: vari√°veis, or√ßamento, prazo, retorno real e como estruturar o plano do zero." },
        "biblia-da-aposentadoria-parte-2": { title: "B√≠blia da Aposentadoria (Parte 2): Aportes, Retorno Real e Aloca√ß√£o por Fases", tag: "Aposentadoria", readTime: "55‚Äì75 min", image: "/images/blog-cover.svg",
          desc: "Motor da acumula√ß√£o: aportes, infla√ß√£o, retorno real e aloca√ß√£o por fases com regras institucionais." },
        "biblia-da-aposentadoria-parte-3": { title: "B√≠blia da Aposentadoria (Parte 3): Saque Seguro, Guardrails e Buckets", tag: "Aposentadoria", readTime: "60‚Äì85 min", image: "/images/blog-cover.svg",
          desc: "Fase de saque: risco de sequ√™ncia, guardrails, bucket strategy e rebalanceamento integrado a saques." },
        "biblia-da-aposentadoria-parte-4": { title: "B√≠blia da Aposentadoria (Parte 4): Risco, Prote√ß√£o e Execu√ß√£o em 12 Meses", tag: "Aposentadoria", readTime: "45‚Äì65 min", image: "/images/blog-cover.svg",
          desc: "Fechamento do sistema: governan√ßa, prote√ß√£o, impostos (vis√£o pr√°tica) e plano de execu√ß√£o anual." }
      };

      const pinOrder = [
        "guia-completo-investimentos-iniciantes-2026",
        "etf-masterclass-carteira-global-parte-1",
        "etf-masterclass-carteira-global-parte-2",
        "etf-masterclass-carteira-global-parte-3",
        "etf-masterclass-carteira-global-parte-4",
        "biblia-da-aposentadoria-parte-1",
        "biblia-da-aposentadoria-parte-2",
        "biblia-da-aposentadoria-parte-3",
        "biblia-da-aposentadoria-parte-4",
        "renda-fixa-guia-completo-2026",
        "etfs-alocacao-global-guia-2026_cfa",
        "construcao-patrimonio-independencia-financeira-2026_max",
        "warren-buffett-biografia-completa-2026"
      ];

      const items = posts.map(p => {
        const parts = p.path.split('/');
        const file = parts[parts.length - 1] || '';
        const slug = file.replace(/\.html$/,'');
        const isPilar = slug.includes('guia-completo-investimentos-iniciantes-2026');
        const fmKey = slug.toLowerCase();
        const featured = featuredMap[fmKey];
        return {
          url: p.path,
          slug,
          title: featured ? featured.title : (isPilar ? 'Guia Completo de Investimentos para Iniciantes (2026)' : slugToTitle(file)),
          desc: featured ? featured.desc : (isPilar ? 'Artigo pilar: do zero ao plano de 30 dias, com reserva, renda fixa, ETFs, FIIs e a√ß√µes.' : buildDescFromSlug(slug)),
          image: featured ? featured.image : (isPilar ? '/images/blog-cover.svg' : '/images/blog-default.svg'),
          tag: featured ? featured.tag : inferTagFromSlug(slug),
          readTime: featured ? featured.readTime : (isPilar ? '20‚Äì30 min' : '10‚Äì15 min'),
          lastmod: isoToBr(p.lastmod)
        };
      });

      // Ordena: pins primeiro, depois por lastmod (mais recente primeiro)
      items.sort((a,b) => {
        const ai = pinOrder.indexOf((a.slug || '').toLowerCase());
        const bi = pinOrder.indexOf((b.slug || '').toLowerCase());
        if (ai !== -1 || bi !== -1) {
          if (ai === -1) return 1;
          if (bi === -1) return -1;
          return ai - bi;
        }
        // lastmod √© dd/mm/aaaa: convertendo para compara√ß√£o segura
        const parseBR = (s) => {
          const m = String(s||'').match(/^(\d{2})\/(\d{2})\/(\d{4})$/);
          if(!m) return 0;
          return new Date(`${m[3]}-${m[2]}-${m[1]}T00:00:00`).getTime();
        };
        return parseBR(b.lastmod) - parseBR(a.lastmod);
      });

      state.posts = items;
      state.shown = items;

      renderTags();
      render();
    }

    els.search.addEventListener('input', e => { state.q = e.target.value || ''; applyFilters(); });
    els.tag.addEventListener('change', e => { state.tag = e.target.value || 'all'; applyFilters(); });

    loadFromSitemap().catch(err => {
      els.container.innerHTML = `<div class="empty-state"><h3 style="margin-top:0;">Erro ao carregar posts</h3><p class="muted">${String(err.message || err)}</p><p class="muted">Verifique se <a href="/sitemap.xml">/sitemap.xml</a> est√° acess√≠vel.</p></div>`;
    });
  </script>
</body>
</html>
